(this["webpackJsonppancake-frontend"]=this["webpackJsonppancake-frontend"]||[]).push([[7],{1065:function(e,t,n){"use strict";n.d(t,"h",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return m})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return g})),n.d(t,"i",(function(){return w})),n.d(t,"g",(function(){return k})),n.d(t,"a",(function(){return y})),n.d(t,"f",(function(){return S}));var r=n(20),c=n(42),a=n(8),o=n(2),s=n.n(o),i=n(13),u=n(29),b=n.n(u),l=n(32),j=n(102),d=n(40),x=n(67),p=n(112),O=n(1070),f=function(e){return e.author.toLowerCase()===O.a.toLowerCase()},h=function(e,t){switch(t){case x.e.COMMUNITY:return e.filter((function(e){return!f(e)}));case x.e.CORE:return e.filter((function(e){return f(e)}));case x.e.ALL:default:return e}},m=function(e,t){return e.filter((function(e){return e.state===t}))},v=function(){return{plugins:{},network:56,strategies:[{name:"cake",params:{symbol:"CAKE",address:Object(l.g)(),decimals:18}}]}},g=function(){return{version:O.e,timestamp:(Date.now()/1e3).toFixed(),space:O.c}},w=function(){var e=Object(i.a)(s.a.mark((function e(t){var n,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(j.e,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 2:if((n=e.sent).ok){e.next=8;break}return e.next=6,n.json();case 6:throw r=e.sent,new Error(null===r||void 0===r?void 0:r.error_description);case 8:return e.next=10,n.json();case 10:return c=e.sent,e.abrupt("return",c);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(i.a)(s.a.mark((function e(t,n,r){var c,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r,e.t0){e.next=5;break}return e.next=4,p.a.getBlockNumber();case 4:e.t0=e.sent;case 5:return c=e.t0,e.next=8,fetch("".concat(j.f,"/power"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:t,block:c,poolAddresses:n})});case 8:return a=e.sent,e.next=11,a.json();case 11:return o=e.sent,e.abrupt("return",o.data);case 13:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),y=function(e){return e.reduce((function(e,t){var n=t.proposal.choices[t.choice-1];return Object(a.a)(Object(a.a)({},e),{},Object(r.a)({},n,e[n]?[].concat(Object(c.a)(e[n]),[t]):[t]))}),{})},S=function(e){return e.reduce((function(e,t){var n,r=new b.a(null===(n=t.metadata)||void 0===n?void 0:n.votingPower);return e.plus(r)}),d.c)}},1068:function(e,t,n){"use strict";t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;return"".concat(e.substring(0,t),"...").concat(e.substring(e.length-n))}},1070:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"f",(function(){return i}));var r=10,c="0x6eaf1b33b8672c5dc40aB8f4bA3A0111723126c7",a="https://gateway.ipfs.io/ipfs",o="0.1.3",s="cake.eth",i=10},1074:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return v})),n.d(t,"c",(function(){return g})),n.d(t,"b",(function(){return C}));var r=n(8),c=n(2),a=n.n(c),o=n(42),s=n(13),i=n(84),u=function(){var e=Object(s.a)(a.a.mark((function e(t,n,r,c){var s,u,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t[n]){e.next=2;break}throw new Error("Method ".concat(n," doesn't exist on ").concat(t.address));case 2:return e.next=4,(s=t.estimateGas)[n].apply(s,Object(o.a)(r));case 4:return u=e.sent,b=u.mul(i.a.BigNumber.from(1e4).add(i.a.BigNumber.from(c))).div(i.a.BigNumber.from(1e4)),e.abrupt("return",b);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,c){return e.apply(this,arguments)}}(),b=function(){var e=Object(s.a)(a.a.mark((function e(t,n){var c,s,i,b,l,j=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=j.length>2&&void 0!==j[2]?j[2]:[],s=j.length>3&&void 0!==j[3]?j[3]:{},i=j.length>4&&void 0!==j[4]?j[4]:1e3,b=u(t,n,c,i),e.next=6,t[n].apply(t,Object(o.a)(c).concat([Object(r.a)({gasLimit:b},s)]));case 6:return l=e.sent,e.abrupt("return",l);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),l=n(29),j=n.n(l),d=n(118),x=n(7),p=n(98),O=n(86),f=function(){var e=p.a.getState().user.gasPrice||O.b.default;return"56"===x.a.MAINNET.toString()?e:O.b.testnet},h={gasLimit:d.i},m=function(){var e=Object(s.a)(a.a.mark((function e(t,n,c){var o,s,i,u,b,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=f(),s=new j.a(c).times(d.j).toString(),0!==n){e.next=10;break}return e.next=5,t.enterStaking(s,Object(r.a)(Object(r.a)({},h),{},{gasPrice:o}));case 5:return i=e.sent,e.next=8,i.wait();case 8:return u=e.sent,e.abrupt("return",u.status);case 10:return e.next=12,t.deposit(n,s,Object(r.a)(Object(r.a)({},h),{},{gasPrice:o}));case 12:return b=e.sent,e.next=15,b.wait();case 15:return l=e.sent,e.abrupt("return",l.status);case 17:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),v=function(){var e=Object(s.a)(a.a.mark((function e(t,n,c){var o,s,i,u,b,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=f(),s=new j.a(c).times(d.j).toString(),0!==n){e.next=10;break}return e.next=5,t.leaveStaking(s,Object(r.a)(Object(r.a)({},h),{},{gasPrice:o}));case 5:return i=e.sent,e.next=8,i.wait();case 8:return u=e.sent,e.abrupt("return",u.status);case 10:return e.next=12,t.withdraw(n,s,Object(r.a)(Object(r.a)({},h),{},{gasPrice:o}));case 12:return b=e.sent,e.next=15,b.wait();case 15:return l=e.sent,e.abrupt("return",l.status);case 17:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),g=function(){var e=Object(s.a)(a.a.mark((function e(t,n){var c,o,s,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=f(),0!==n){e.next=9;break}return e.next=4,t.leaveStaking("0",Object(r.a)(Object(r.a)({},h),{},{gasPrice:c}));case 4:return o=e.sent,e.next=7,o.wait();case 7:return s=e.sent,e.abrupt("return",s.status);case 9:return e.next=11,t.deposit(n,"0",Object(r.a)(Object(r.a)({},h),{},{gasPrice:c}));case 11:return i=e.sent,e.next=14,i.wait();case 14:return u=e.sent,e.abrupt("return",u.status);case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=n(99),k=n(381),y=n(55),S=n(112),B=n(32),C=function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r,c,s,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=w.a.filter((function(e){return 0!==e.sousId})).filter((function(e){return!1===e.isFinished||void 0===e.isFinished})),e.t0=t,e.t0){e.next=6;break}return e.next=5,S.a.getBlockNumber();case 5:e.t0=e.sent;case 6:return r=e.t0,c=n.map((function(e){var t=e.contractAddress;return{address:Object(B.a)(t),name:"startBlock"}})),s=n.map((function(e){var t=e.contractAddress;return{address:Object(B.a)(t),name:"bonusEndBlock"}})),e.next=11,Object(y.a)(k,c);case 11:return i=e.sent,e.next=14,Object(y.a)(k,s);case 14:return u=e.sent,e.abrupt("return",n.reduce((function(e,t,n){var c=i[n]?new j.a(i[n]):null,a=u[n]?new j.a(u[n]):null;return c&&a?c.gte(r)||a.lte(r)?e:[].concat(Object(o.a)(e),[t]):e}),[]));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},1093:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return b})),n.d(t,"a",(function(){return l}));var r=n(8),c=(n(0),n(3)),a=n(31),o=n(1),s=function(e){var t=Object(a.b)().t;return Object(o.jsx)(c.bc,Object(r.a)(Object(r.a)({variant:"secondary",outline:!0,startIcon:Object(o.jsx)(c.pc,{width:"18px",color:"secondary",mr:"4px"})},e),{},{children:t("Core")}))},i=function(e){var t=Object(a.b)().t;return Object(o.jsx)(c.bc,Object(r.a)(Object(r.a)({variant:"failure",outline:!0,startIcon:Object(o.jsx)(c.M,{width:"18px",color:"failure",mr:"4px"})},e),{},{children:t("Community")}))},u=function(e){var t=Object(a.b)().t;return Object(o.jsx)(c.bc,Object(r.a)(Object(r.a)({variant:"success",startIcon:Object(o.jsx)(c.sc,{width:"18px",color:"success",mr:"4px"})},e),{},{children:t("Vote Now")}))},b=function(e){var t=Object(a.b)().t;return Object(o.jsx)(c.bc,Object(r.a)(Object(r.a)({variant:"binance",startIcon:Object(o.jsx)(c.fc,{width:"18px",color:"success",mr:"4px"})},e),{},{children:t("Soon")}))},l=function(e){var t=Object(a.b)().t;return Object(o.jsx)(c.bc,Object(r.a)(Object(r.a)({variant:"textDisabled",startIcon:Object(o.jsx)(c.k,{width:"18px",color:"textDisabled",mr:"4px"})},e),{},{children:t("Closed")}))}},1095:function(e,t,n){var r=n(1096),c=n(117);e.exports=function(e,t,n,a){return null==e?[]:(c(t)||(t=null==t?[]:[t]),c(n=a?void 0:n)||(n=null==n?[]:[n]),r(e,t,n))}},1096:function(e,t,n){var r=n(308),c=n(379),a=n(378),o=n(505),s=n(1097),i=n(502),u=n(1098),b=n(189),l=n(117);e.exports=function(e,t,n){t=t.length?r(t,(function(e){return l(e)?function(t){return c(t,1===e.length?e[0]:e)}:e})):[b];var j=-1;t=r(t,i(a));var d=o(e,(function(e,n,c){return{criteria:r(t,(function(t){return t(e)})),index:++j,value:e}}));return s(d,(function(e,t){return u(e,t,n)}))}},1097:function(e,t){e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},1098:function(e,t,n){var r=n(1099);e.exports=function(e,t,n){for(var c=-1,a=e.criteria,o=t.criteria,s=a.length,i=n.length;++c<s;){var u=r(a[c],o[c]);if(u)return c>=i?u:u*("desc"==n[c]?-1:1)}return e.index-t.index}},1099:function(e,t,n){var r=n(212);e.exports=function(e,t){if(e!==t){var n=void 0!==e,c=null===e,a=e===e,o=r(e),s=void 0!==t,i=null===t,u=t===t,b=r(t);if(!i&&!b&&!o&&e>t||o&&s&&u&&!i&&!b||c&&s&&u||!n&&u||!a)return 1;if(!c&&!o&&!b&&e<t||b&&n&&a&&!c&&!o||i&&n&&a||!s&&a||!u)return-1}return 0}},1104:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"b",(function(){return i}));var r=n(33),c=function(){var e=Object(r.c)((function(e){return e.voting.proposals}));return Object.values(e)},a=function(e){return Object(r.c)((function(t){return t.voting.proposals[e]}))},o=function(e){var t=Object(r.c)((function(t){return t.voting.votes[e]}));return t?t.filter((function(e){return!0!==e._inValid})):[]},s=function(){return Object(r.c)((function(e){return e.voting.voteLoadingStatus}))},i=function(){return Object(r.c)((function(e){return e.voting.proposalLoadingStatus}))}},1118:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return l}));var r=n(8),c=n(65),a=(n(0),n(1093)),o=n(67),s=n(1),i=["proposalState"],u=["isCoreProposal"],b=function(e){var t=e.proposalState,n=Object(c.a)(e,i);return t===o.d.ACTIVE?Object(s.jsx)(a.e,Object(r.a)({},n)):t===o.d.PENDING?Object(s.jsx)(a.d,Object(r.a)({},n)):Object(s.jsx)(a.a,Object(r.a)({},n))},l=function(e){var t=e.isCoreProposal,n=Object(c.a)(e,u);return t?Object(s.jsx)(a.c,Object(r.a)({},n)):Object(s.jsx)(a.b,Object(r.a)({},n))}},1125:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return b}));var r,c=n(8),a=n(17),o=(n(0),n(3)),s=n(6),i=n(1),u=s.e.div(r||(r=Object(a.a)(["\n  align-items: center;\n  border: 1px solid ",";\n  border-radius: 12px;\n  display: flex;\n  height: 64px;\n  justify-content: space-between;\n  margin-bottom: 24px;\n  padding: 0 16px;\n"])),(function(e){return e.theme.colors.cardBorder})),b=function(e){return Object(i.jsx)(o.m,Object(c.a)({mb:"24px",maxWidth:"320px"},e))}},1146:function(e,t,n){"use strict";var r,c=n(17),a=n(6).e.div(r||(r=Object(c.a)(["\n  align-items: start;\n  display: grid;\n  grid-gap: 32px;\n  grid-template-columns: minmax(0, 1fr);\n\n  "," {\n    grid-template-columns: 1fr 332px;\n  }\n"])),(function(e){return e.theme.mediaQueries.lg}));t.a=a},1147:function(e,t,n){"use strict";n(0);var r=n(3),c=n(31),a=n(1125),o=n(1);t.a=function(e){var t=e.total,n=e.cakeBalance,s=e.cakeVaultBalance,i=e.cakePoolBalance,u=e.poolsBalance,b=e.cakeBnbLpBalance,l=Object(c.b)().t;return Object(o.jsxs)(a.a,{mb:"0",children:[Object(o.jsx)(r.dc,{as:"p",mb:"24px",fontSize:"14px",color:"textSubtle",children:l("Your voting power is determined by the amount of CAKE you held at the block detailed below. CAKE held in other places does not contribute to your voting power.")}),Object(o.jsx)(r.dc,{color:"secondary",textTransform:"uppercase",mb:"4px",bold:!0,fontSize:"14px",children:l("Overview")}),Object(o.jsxs)(a.b,{children:[Object(o.jsx)(r.dc,{color:"secondary",children:l("Your Voting Power")}),Object(o.jsx)(r.dc,{bold:!0,fontSize:"20px",children:t.toFormat(3)})]}),Object(o.jsx)(r.dc,{color:"secondary",textTransform:"uppercase",mb:"4px",bold:!0,fontSize:"14px",children:l("Your Cake Held Now")}),Object(o.jsxs)(r.V,{alignItems:"center",justifyContent:"space-between",mb:"4px",children:[Object(o.jsx)(r.dc,{color:"textSubtle",fontSize:"16px",children:l("Wallet")}),Object(o.jsx)(r.dc,{textAlign:"right",children:n.toFormat(3)})]}),Object(o.jsxs)(r.V,{alignItems:"center",justifyContent:"space-between",mb:"4px",children:[Object(o.jsx)(r.dc,{color:"textSubtle",fontSize:"16px",children:l("Manual CAKE Pool")}),Object(o.jsx)(r.dc,{textAlign:"right",children:i.toFormat(3)})]}),Object(o.jsxs)(r.V,{alignItems:"center",justifyContent:"space-between",mb:"4px",children:[Object(o.jsx)(r.dc,{color:"textSubtle",fontSize:"16px",children:l("Auto CAKE Pool")}),Object(o.jsx)(r.dc,{textAlign:"right",children:s.toFormat(3)})]}),Object(o.jsxs)(r.V,{alignItems:"center",justifyContent:"space-between",mb:"4px",children:[Object(o.jsx)(r.dc,{color:"textSubtle",fontSize:"16px",children:l("Other Syrup Pools")}),Object(o.jsx)(r.dc,{textAlign:"right",children:u.toFormat(3)})]}),Object(o.jsxs)(r.V,{alignItems:"center",justifyContent:"space-between",mb:"4px",children:[Object(o.jsx)(r.dc,{color:"textSubtle",fontSize:"16px",children:l("CAKE BNB LP")}),Object(o.jsx)(r.dc,{textAlign:"right",children:b.toFormat(3)})]})]})}},1148:function(e,t,n){"use strict";var r=n(2),c=n.n(r),a=n(8),o=n(13),s=n(12),i=n(0),u=n(68),b=n(40),l=n(1074),j=n(32),d=n(112),x=n(29),p=n.n(x),O=n(1065),f={verificationHash:null,cakeBalance:b.c,cakeVaultBalance:b.c,cakePoolBalance:b.c,poolsBalance:b.c,cakeBnbLpBalance:b.c,total:b.c};t.a=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object(u.c)(),r=n.account,b=Object(i.useState)(f),x=Object(s.a)(b,2),h=x[0],m=x[1],v=Object(i.useState)(!!r),g=Object(s.a)(v,2),w=g[0],k=g[1];return Object(i.useEffect)((function(){r&&t&&function(){var n=Object(o.a)(c.a.mark((function n(){var o,s,i,u,b,x,f,h,v,g,w;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(k(!0),n.prev=1,n.t0=e,n.t0){n.next=7;break}return n.next=6,d.a.getBlockNumber();case 6:n.t0=n.sent;case 7:return o=n.t0,n.next=10,Object(l.b)(o);case 10:return s=n.sent,i=s.map((function(e){var t=e.contractAddress;return Object(j.a)(t)})),n.next=14,Object(O.g)(r,i,o);case 14:u=n.sent,b=u.cakeBalance,x=u.cakeBnbLpBalance,f=u.cakePoolBalance,h=u.total,v=u.poolsBalance,g=u.cakeVaultBalance,w=u.verificationHash,t&&m((function(e){return Object(a.a)(Object(a.a)({},e),{},{verificationHash:w,cakeBalance:new p.a(b),cakeBnbLpBalance:new p.a(x),cakePoolBalance:new p.a(f),poolsBalance:new p.a(v),cakeVaultBalance:new p.a(g),total:new p.a(h)})}));case 23:return n.prev=23,k(!1),n.finish(23);case 26:case"end":return n.stop()}}),n,null,[[1,,23,26]])})));return function(){return n.apply(this,arguments)}}()()}),[r,e,m,t,k]),Object(a.a)(Object(a.a)({},h),{},{isLoading:w})}},1180:function(e,t,n){"use strict";var r,c,a,o=n(8),s=(n(0),n(1187)),i=n.n(s),u=n(1223),b=n.n(u),l=n(17),j=n(3),d=n(6),x=n(1),p=d.e.table(r||(r=Object(l.a)(["\n  margin-bottom: 32px;\n  margin-top: 32px;\n  width: 100%;\n\n  td,\n  th {\n    color: ",";\n    padding: 8px;\n  }\n"])),(function(e){return e.theme.colors.text})),O=d.e.div(c||(c=Object(l.a)(["\n  color: ",";\n  margin-bottom: 16px;\n  margin-top: 16px;\n\n  li {\n    margin-bottom: 8px;\n  }\n"])),(function(e){return e.theme.colors.text})),f=function(e){return Object(x.jsx)(j.X,Object(o.a)({as:"h4",scale:"lg",my:"16px"},e))},h={h1:f,h2:f,h3:f,h4:f,h5:f,h6:f,p:function(e){return Object(x.jsx)(j.dc,Object(o.a)({as:"p",my:"16px"},e))},table:p,ol:function(e){return Object(x.jsx)(O,Object(o.a)({as:"ol"},e))},ul:function(e){return Object(x.jsx)(O,Object(o.a)({as:"ul"},e))},pre:d.e.pre(a||(a=Object(l.a)(["\n  color: ",";\n  margin-bottom: 16px;\n  margin-top: 16px;\n  max-width: 100%;\n  overflow-x: auto;\n"])),(function(e){return e.theme.colors.text}))};t.a=function(e){return Object(x.jsx)(i.a,Object(o.a)({remarkPlugins:[b.a],components:h},e))}},1666:function(e,t,n){"use strict";n.r(t);var r,c,a,o=n(2),s=n.n(o),i=n(13),u=n(0),b=n(3),l=n(68),j=n(75),d=n(97),x=n(98),p=n(67),O=n(1104),f=n(391),h=n(31),m=n(374),v=n(1180),g=n(386),w=n(1065),k=n(1118),y=n(1146),S=n(17),B=n(6),C=n(1039),I=n(39),V=n(1068),A=n(1070),L=n(1),P=Object(B.e)(b.m)(r||(r=Object(S.a)(["\n  background-color: ",";\n  border: 1px solid ",";\n  border-radius: 16px;\n"])),(function(e){return e.theme.colors.background}),(function(e){return e.theme.colors.cardBorder})),N=function(e){var t=e.proposal,n=Object(h.b)().t,r=new Date(1e3*t.start),c=new Date(1e3*t.end);return Object(L.jsxs)(b.u,{mb:"16px",children:[Object(L.jsx)(b.x,{children:Object(L.jsx)(b.X,{as:"h3",scale:"md",children:n("Details")})}),Object(L.jsxs)(b.v,{children:[Object(L.jsxs)(b.V,{alignItems:"center",mb:"8px",children:[Object(L.jsx)(b.dc,{color:"textSubtle",children:n("Identifier")}),Object(L.jsx)(b.hb,{href:"".concat(A.b,"/").concat(t.id),ml:"8px",children:t.id.slice(0,8)})]}),Object(L.jsxs)(b.V,{alignItems:"center",mb:"8px",children:[Object(L.jsx)(b.dc,{color:"textSubtle",children:n("Creator")}),Object(L.jsx)(b.hb,{href:Object(I.e)(t.author,"address"),ml:"8px",children:Object(V.a)(t.author)})]}),Object(L.jsxs)(b.V,{alignItems:"center",mb:"16px",children:[Object(L.jsx)(b.dc,{color:"textSubtle",children:n("Snapshot")}),Object(L.jsx)(b.hb,{href:Object(I.e)(t.snapshot,"block"),ml:"8px",children:t.snapshot})]}),Object(L.jsxs)(P,{p:"16px",children:[Object(L.jsx)(k.a,{proposalState:t.state,mb:"8px"}),Object(L.jsxs)(b.V,{alignItems:"center",children:[Object(L.jsx)(b.dc,{color:"textSubtle",fontSize:"14px",children:n("Start Date")}),Object(L.jsx)(b.dc,{ml:"8px",children:Object(C.default)(r,"yyyy-MM-dd HH:mm")})]}),Object(L.jsxs)(b.V,{alignItems:"center",children:[Object(L.jsx)(b.dc,{color:"textSubtle",fontSize:"14px",children:n("End Date")}),Object(L.jsx)(b.dc,{ml:"8px",children:Object(C.default)(c,"yyyy-MM-dd HH:mm")})]})]})]})]})},D=n(1105),E=n.n(D),z=Object(B.e)(b.dc)(c||(c=Object(S.a)(["\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"]))),F=function(e){var t=e.choices,n=e.votes,r=Object(h.b)().t,c=Object(w.a)(n),a=Object(O.e)(),o=Object(l.c)().account,s=Object(w.f)(n);return Object(L.jsxs)(b.u,{children:[Object(L.jsx)(b.x,{children:Object(L.jsx)(b.X,{as:"h3",scale:"md",children:r("Current Results")})}),Object(L.jsxs)(b.v,{children:[a===p.g.IDLE&&t.map((function(e,t){var n=c[e]||[],a=Object(w.f)(n),i=s.eq(0)?0:a.div(s).times(100).toNumber(),u=n.some((function(e){return o&&e.voter.toLowerCase()===o.toLowerCase()}));return Object(L.jsxs)(b.m,{mt:t>0?"24px":"0px",children:[Object(L.jsxs)(b.V,{alignItems:"center",mb:"8px",children:[Object(L.jsx)(z,{mb:"4px",title:e,children:e}),u&&Object(L.jsxs)(b.bc,{variant:"success",outline:!0,ml:"8px",children:[Object(L.jsx)(b.D,{mr:"4px"})," ",r("Voted")]})]}),Object(L.jsx)(b.m,{mb:"4px",children:Object(L.jsx)(b.Lb,{primaryStep:i,scale:"sm"})}),Object(L.jsxs)(b.V,{alignItems:"center",justifyContent:"space-between",children:[Object(L.jsx)(b.dc,{color:"textSubtle",children:r("%total% Votes",{total:a.toFormat(3)})}),Object(L.jsxs)(b.dc,{children:[i.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),"%"]})]})]},e)})),a===p.g.LOADING&&E()(t.length).map((function(e,t){return Object(L.jsx)(b.m,{mt:t>0?"24px":"0px",children:Object(L.jsx)(b.Qb,{height:"36px",mb:"4px"})},e)}))]})]})},T=n(8),M=n(12),H=n(65),q=n(184),X=n(187),K=n(20),Q=n(194),G=n(23),J=n(154);!function(e){e.MAIN="main",e.DETAILS="details"}(a||(a={}));var Y,W,R,_,U,Z,$,ee,te=n(1125),ne=function(e){var t=e.vote,n=e.total,r=e.isPending,c=e.isLoading,a=e.onConfirm,o=e.onViewDetails,s=e.onDismiss,i=Object(h.b)().t;return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(te.a,{children:[Object(L.jsx)(b.dc,{color:"secondary",mb:"8px",textTransform:"uppercase",fontSize:"12px",bold:!0,children:i("Voting For")}),Object(L.jsx)(z,{bold:!0,fontSize:"20px",mb:"8px",title:t.label,children:t.label}),Object(L.jsx)(b.dc,{color:"secondary",mb:"8px",textTransform:"uppercase",fontSize:"12px",bold:!0,children:i("Your Voting Power")}),c?Object(L.jsx)(b.Qb,{height:"64px",mb:"24px"}):Object(L.jsxs)(te.b,{onClick:o,style:{cursor:"pointer"},children:[Object(L.jsx)(b.dc,{bold:!0,fontSize:"20px",children:n.toFormat(3)}),Object(L.jsx)(b.ab,{scale:"sm",variant:"text",children:Object(L.jsx)(b.H,{width:"24px"})})]}),Object(L.jsx)(b.dc,{as:"p",color:"textSubtle",fontSize:"14px",children:i("Are you sure you want to vote for the above choice? This action cannot be undone.")})]}),Object(L.jsx)(b.q,{isLoading:r,endIcon:r?Object(L.jsx)(b.h,{spin:!0,color:"currentColor"}):null,disabled:c||n.eq(0),width:"100%",mb:"8px",onClick:a,children:i("Confirm Vote")}),Object(L.jsx)(b.q,{variant:"secondary",width:"100%",onClick:s,children:i("Cancel")})]})},re=n(1147),ce=n(1148),ae=function(e){var t,n=e.onSuccess,r=e.proposalId,c=e.vote,o=e.block,j=e.onDismiss,d=Object(u.useState)(a.MAIN),x=Object(M.a)(d,2),O=x[0],f=x[1],m=Object(u.useState)(!0),v=Object(M.a)(m,2),g=v[0],k=v[1],y=Object(u.useState)(!1),S=Object(M.a)(y,2),B=S[0],C=S[1],I=Object(l.c)().account,V=Object(h.b)().t,A=Object(q.a)().toastError,P=Object(G.a)().library,N=Object(J.a)().theme,D=Object(ce.a)(o,g),E=D.isLoading,z=D.total,F=D.cakeBalance,H=D.cakeVaultBalance,X=D.cakePoolBalance,Y=D.poolsBalance,W=D.cakeBnbLpBalance,R=D.verificationHash,_=O===a.MAIN,U=_?null:function(){return f(a.MAIN)},Z=(t={},Object(K.a)(t,a.MAIN,V("Confirm Vote")),Object(K.a)(t,a.DETAILS,V("Voting Power")),t),$=function(){k(!1),j()},ee=function(){var e=Object(i.a)(s.a.mark((function e(){var t,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(!0),t=JSON.stringify(Object(T.a)(Object(T.a)({},Object(w.e)()),{},{type:p.f.VOTE,payload:{proposal:r,choice:c.value,metadata:{votingPower:z.toString(),verificationHash:R}}})),e.next=5,Object(Q.c)(P,I,t);case 5:return a=e.sent,o={address:I,msg:t,sig:a},e.next=9,Object(w.i)(o);case 9:return C(!1),e.next=12,n();case 12:$(),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(0),C(!1),A(V("Error"),null===e.t0||void 0===e.t0?void 0:e.t0.message),console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();return Object(L.jsx)(b.tb,{title:Z[O],onBack:U,onDismiss:j,hideCloseButton:!_,headerBackground:N.colors.gradients.cardHeader,children:Object(L.jsxs)(b.m,{mb:"24px",width:"320px",children:[O===a.MAIN&&Object(L.jsx)(ne,{vote:c,isLoading:E,isPending:B,total:z,onConfirm:ee,onViewDetails:function(){return f(a.DETAILS)},onDismiss:$}),O===a.DETAILS&&Object(L.jsx)(re.a,{total:z,cakeBalance:F,cakeVaultBalance:H,cakePoolBalance:X,poolsBalance:Y,cakeBnbLpBalance:W})]})})},oe=["proposal"],se=B.e.label(Y||(Y=Object(S.a)(["\n  align-items: center;\n  border: 1px solid ",";\n  border-radius: 16px;\n  cursor: ",";\n  display: flex;\n  margin-bottom: 16px;\n  padding: 16px;\n"])),(function(e){var t=e.theme,n=e.isChecked;return t.colors[n?"success":"cardBorder"]}),(function(e){return e.isDisabled?"not-allowed":"pointer"})),ie=B.e.div(W||(W=Object(S.a)(["\n  flex: 1;\n  padding-left: 16px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  width: 0;\n"]))),ue=function(e){var t=e.proposal,n=Object(H.a)(e,oe),r=Object(u.useState)(null),c=Object(M.a)(r,2),a=c[0],o=c[1],j=Object(h.b)().t,d=Object(q.a)().toastSuccess,p=Object(x.b)(),O=Object(l.c)().account,m=function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(j("Vote cast!")),p(Object(f.d)({proposalId:t.id,block:Number(t.snapshot)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=Object(b.Ac)(Object(L.jsx)(ae,{onSuccess:m,proposalId:t.id,vote:a,block:Number(t.snapshot)})),g=Object(M.a)(v,1)[0];return Object(L.jsxs)(b.u,Object(T.a)(Object(T.a)({},n),{},{children:[Object(L.jsx)(b.x,{children:Object(L.jsx)(b.X,{as:"h3",scale:"md",children:j("Cast your vote")})}),Object(L.jsxs)(b.v,{children:[t.choices.map((function(e,t){var n=t+1===(null===a||void 0===a?void 0:a.value);return Object(L.jsxs)(se,{isChecked:n,isDisabled:!O,children:[Object(L.jsx)("div",{style:{flexShrink:0},children:Object(L.jsx)(b.Nb,{scale:"sm",value:e,checked:n,onChange:function(){o({label:e,value:t+1})},disabled:!O})}),Object(L.jsx)(ie,{children:Object(L.jsx)(b.dc,{as:"span",title:e,children:e})})]},e)})),O?Object(L.jsx)(b.q,{onClick:g,disabled:null===a,children:j("Cast Vote")}):Object(L.jsx)(X.a,{})]})]}))},be=n(1095),le=n.n(be),je=Object(B.e)(b.V)(R||(R=Object(S.a)(["\n  border-bottom: 1px solid ",";\n  padding: 16px 24px;\n"])),(function(e){return e.theme.colors.cardBorder})),de=Object(B.e)(b.Qb)(_||(_=Object(S.a)(["\n  flex: 1;\n"]))),xe=function(){return Object(L.jsx)(b.m,{children:E()(10).map((function(e){return Object(L.jsxs)(je,{children:[Object(L.jsx)(b.Qb,{height:"21px",mr:"32px",width:"100px"}),Object(L.jsx)(de,{height:"21px",mr:"32px",width:"100%"}),Object(L.jsx)(de,{height:"21px",width:"100%"})]},e)}))})},pe=n(29),Oe=n.n(pe),fe=Object(B.e)(b.m).attrs({alignItems:"center"})(U||(U=Object(S.a)(["\n  grid-area: address;\n"]))),he=Object(B.e)(b.m)(Z||(Z=Object(S.a)(["\n  grid-area: choice;\n  overflow: hidden;\n"]))),me=Object(B.e)(b.m)($||($=Object(S.a)(["\n  justify-self: end;\n  grid-area: vote;\n"]))),ve=Object(B.e)(b.W)(ee||(ee=Object(S.a)(["\n  border-bottom: 1px solid ",";\n  grid-gap: 8px;\n  grid-template-areas: 'address choice vote';\n  grid-template-columns: minmax(110px, 200px) 1fr 1fr;\n  padding: 8px 16px;\n\n  "," {\n    grid-gap: 16px;\n    padding: 16px 24px;\n  }\n"])),(function(e){return e.theme.colors.cardBorder}),(function(e){return e.theme.mediaQueries.sm})),ge=function(e){var t,n=e.vote,r=e.isVoter,c=Object(h.b)().t,a=!!(null===(t=n.metadata)||void 0===t?void 0:t.votingPower),o=a?new Oe.a(n.metadata.votingPower).toFormat(3):"--";return Object(L.jsxs)(ve,{children:[Object(L.jsx)(fe,{children:Object(L.jsxs)(b.V,{alignItems:"center",children:[Object(L.jsx)(b.hb,{href:Object(I.e)(n.voter,"address"),children:Object(V.a)(n.voter)}),r&&Object(L.jsxs)(b.bc,{variant:"success",outline:!0,ml:"8px",children:[Object(L.jsx)(b.D,{mr:"4px"})," ",c("Voted")]})]})}),Object(L.jsx)(he,{children:Object(L.jsx)(z,{title:n.proposal.choices[n.choice-1],children:n.proposal.choices[n.choice-1]})}),Object(L.jsx)(me,{children:Object(L.jsxs)(b.V,{alignItems:"center",justifyContent:"end",children:[Object(L.jsx)(b.dc,{title:n.metadata.votingPower,children:o}),a&&Object(L.jsx)(b.hb,{href:"".concat(A.b,"/").concat(n.id)})]})})]})},we=function(e){var t;return parseFloat(null===e||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.votingPower)},ke=function(e){var t=e.votes,n=Object(u.useState)(!1),r=Object(M.a)(n,2),c=r[0],a=r[1],o=Object(h.b)().t,s=Object(l.c)().account,i=le()(t,[we,"created"],["desc","desc"]),j=c?i:i.slice(0,20),d=Object(O.e)()===p.g.IDLE;return Object(L.jsxs)(b.u,{children:[Object(L.jsx)(b.x,{children:Object(L.jsxs)(b.V,{alignItems:"center",justifyContent:"space-between",children:[Object(L.jsx)(b.X,{as:"h3",scale:"md",children:o("Votes (%count%)",{count:t.length.toLocaleString()})}),!d&&Object(L.jsx)(b.h,{spin:!0,width:"22px"})]})}),!d&&Object(L.jsx)(xe,{}),d&&j.length>0&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(ve,{children:[Object(L.jsx)(fe,{children:Object(L.jsx)(b.dc,{fontSize:"12px",color:"textSubtle",textTransform:"uppercase",bold:!0,children:o("Voter")})}),Object(L.jsx)(he,{children:Object(L.jsx)(b.dc,{fontSize:"12px",color:"textSubtle",textTransform:"uppercase",bold:!0,children:o("Decision")})}),Object(L.jsx)(me,{children:Object(L.jsx)(b.dc,{fontSize:"12px",color:"textSubtle",textTransform:"uppercase",bold:!0,children:o("Vote Weight")})})]}),j.map((function(e){var t=s&&e.voter.toLowerCase()===s.toLowerCase();return Object(L.jsx)(ge,{vote:e,isVoter:t},e.id)})),Object(L.jsx)(b.V,{alignItems:"center",justifyContent:"center",py:"8px",px:"24px",children:Object(L.jsx)(b.q,{width:"100%",onClick:function(){a(!c)},variant:"text",endIcon:c?Object(L.jsx)(b.I,{color:"primary",width:"21px"}):Object(L.jsx)(b.F,{color:"primary",width:"21px"}),disabled:!d,children:o(c?"Hide":"See All")})})]}),d&&0===j.length&&Object(L.jsx)(b.V,{alignItems:"center",justifyContent:"center",py:"32px",children:Object(L.jsx)(b.X,{as:"h5",children:o("No votes found")})})]})};t.default=function(){var e=Object(j.i)().id,t=Object(O.a)(e),n=Object(h.b)().t,r=Object(l.c)().account,c=Object(x.b)(),a=Object(O.d)(e),o=Object(O.e)(),S=Object(O.b)(),B=r&&a.some((function(e){return e.voter.toLowerCase()===r.toLowerCase()})),C=null!==t&&void 0!==t?t:{},I=C.id,V=void 0===I?null:I,A=C.snapshot,P=void 0===A?null:A,D=o===p.g.LOADING||S===p.g.LOADING;return Object(u.useEffect)((function(){c(Object(f.b)(e))}),[e,c]),Object(u.useEffect)((function(){V&&P&&function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(Object(f.d)({proposalId:V,block:Number(P)}));case 2:c(Object(f.e)({proposalId:V,snapshot:P}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[V,P,c]),t?Object(L.jsxs)(m.a,{py:"40px",children:[Object(L.jsx)(b.m,{mb:"40px",children:Object(L.jsx)(b.q,{as:d.a,to:"/voting",variant:"text",startIcon:Object(L.jsx)(b.b,{color:"primary",width:"24px"}),px:"0",children:n("Back to Vote Overview")})}),Object(L.jsxs)(y.a,{children:[Object(L.jsxs)(b.m,{children:[Object(L.jsxs)(b.m,{mb:"32px",children:[Object(L.jsxs)(b.V,{alignItems:"center",mb:"8px",children:[Object(L.jsx)(k.a,{proposalState:t.state}),Object(L.jsx)(k.b,{isCoreProposal:Object(w.h)(t),ml:"8px"})]}),Object(L.jsx)(b.X,{as:"h1",scale:"xl",mb:"16px",children:t.title}),Object(L.jsx)(b.m,{children:Object(L.jsx)(v.a,{children:t.body})})]}),!D&&!B&&t.state===p.d.ACTIVE&&Object(L.jsx)(ue,{proposal:t,mb:"16px"}),Object(L.jsx)(ke,{votes:a})]}),Object(L.jsxs)(b.m,{children:[Object(L.jsx)(N,{proposal:t}),Object(L.jsx)(F,{choices:t.choices,votes:a})]})]})]}):Object(L.jsx)(g.a,{})}}}]);
//# sourceMappingURL=7.2e195d38.chunk.js.map